// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider   = "prisma-client-js"
  output     = "../.prisma/client"
  engineType = "binary"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

model HighScore {
  id    Int      @id @default(autoincrement())
  time  DateTime
  score Int
}

model ComputerRequest {
  id       Int    @id @default(autoincrement())
  location String
  staff    String
  reason   String
  type     String
}

model Node {
  id           Int           @id @default(autoincrement())
  xCoord       Int
  yCoord       Int
  floor        Floor
  building     String
  locationName LocationName? @relation(fields: [location], references: [longName], onDelete: Cascade, onUpdate: Cascade)
  location     String?       @unique
  startEdges   Edge[]        @relation("startNode")
  endEdges     Edge[]        @relation("endNode")

  @@unique([xCoord, yCoord, floor])
}

enum Floor {
  L1
  L2
  ONE
  TWO
  THREE
}

model Edge {
  id          Int  @id @default(autoincrement())
  startNode   Node @relation("startNode", fields: [startNodeId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  startNodeId Int
  endNode     Node @relation("endNode", fields: [endNodeId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  endNodeId   Int
}

model LocationName {
  shortName    String
  longName     String @id @unique
  locationType String
  node         Node?
}

model SanitationRequest {
  id       Int    @id @default(autoincrement())
  location String
  staff    String
  issue    String
  urgency  String
}
